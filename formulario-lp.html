<!-- <script>
    const html = document.querySelector("html");
    html.style.overflow = "hidden";
  </script>
  <iframe style="height: 100vh !important; width: 100% !important; overflow: hidden; border: none"
  srcdoc=" -->
  
  <!DOCTYPE html>
  <html lang='pt-BR' data-theme='light'>
  <head>
      <meta charset='UTF-8'>
      <meta name='viewport' content='width=device-width, initial-scale=1.0'>
      <title>Consumo de CEP</title>
      <link rel='stylesheet' href='/src/css/style.css'>
      <script src='https://unpkg.com/imask'></script>
      <link rel='stylesheet' href='https://cdn.jsdelivr.net/npm/bulma@1.0.2/css/bulma.min.css'>
      <script src='https://cdn.jsdelivr.net/npm/axios/dist/axios.min.js'></script>
  </head>
  <style>
      .is-border-danger {
          border: 1px solid #ff335c !important;
          border-radius: 5px;
      }
      .title-custom {
           
          text-align: center; 
          color: rgb(36, 35, 79);
          letter-spacing: 15px; 
          text-align: center
          
      }
      /* Mobile (até 768px) */
      @media screen and (max-width: 768px) {
          .box {
              width: 90%;
          }
      }
  
      /* Tablet (de 769px a 1023px) */
      @media screen and (min-width: 769px) and (max-width: 1023px) {
          .box {
              width: 80%;
          }
      }
  
      /* Desktop (de 1024px a 1215px) */
      @media screen and (min-width: 1024px) and (max-width: 1215px) {
          .box {
              width: 70%;
          }
      }
  
      /* Widescreen (a partir de 1216px) */
      @media screen and (min-width: 1216px) {
          .box {
              width: 60%;
          }
      }
      
  </style>
  <body class='py-4 has-background-white-ter is-flex is-justify-content-center'>
  
  <div class='box py-6'>
      <header>
          <div class='is-flex is-justify-content-center mb-6'>
              <img src='https://ss-usa.s3.amazonaws.com/companies/MzY0Mje0MDY2AwA/uploads/logo_Multimidia_Editora.png'
                   alt='Logo da Multimídia Editora' class='fr-dib shsp-de-btn-align-center'
                   data-store-id='b450df65-d8c3-48c5-956c-ecc9e659d00f' width='465'>
          </div>
      </header>
  
      <main class='container is-max-desktop'>
     <h1 class='label title-custom pb-5'>RESERVA DE OPORTUNIDADE</h1>
          <form action='#' id='formulario-cep' method='POST' aria-labelledby='formulario-cep' class='columns is-multiline'>
              <div class='column is-12'>
                  <label class='label is-size-5' for='nome-completo'>Nome Completo<span class='has-text-danger'>*</span></label>
                  <div class='control is-expanded'>
                      <input class='input is-uppercase' maxlength='100' type='text' name='nome-completo'
                             id='nome-completo' autofocus required aria-label='Nome completo'>
                  </div>
              </div>
  
              <div class='column is-12'>
                  <label class='label is-size-5' for='email'>E-mail <span class='has-text-danger'>*</span></label>
                  <div class='control is-expanded'>
                      <input class='input' type='email' name='email' id='email' required aria-label='E-mail'>
                  </div>
              </div>
  
              <div class='column is-12'>
                  <label class='label is-size-5' for='whatsapp'>WhatsApp <span class='has-text-danger'>*</span></label>
                  <div class='control is-expanded'>
                      <input class='input' type='text' name='whatsapp' id='whatsapp' required aria-label='WhatsApp'>
                  </div>
              </div>
  
              <div class='column is-12'>
                  <label class='label is-size-5' for='nome-empresa'>Nome da Empresa <span class='has-text-danger'>*</span></label>
                  <div class='control is-expanded'>
                      <input class='input is-uppercase' type='text' maxlength='100' name='nome-empresa' id='nome-empresa' required
                             aria-label='Nome da empresa'>
                  </div>
              </div>
  
              <div class='column is-12' id='container-checkbox'>
                  <label class='label is-size-5' for='orgao-publico'>Órgão Público <span class='has-text-danger'>*</span></label>
                  <div class='control'>
                      <div class='checkbox-group'>
                          <div class='field'>
                              <label class='checkbox'>
                                  <input type='checkbox' name='orgao-publico[]' value='camara-municipal'>
                                  Câmara Municipal
                              </label>
                          </div>
                          <div class='field'>
                              <label class='checkbox'>
                                  <input type='checkbox' name='orgao-publico[]' value='secretaria-municipal-saude'>
                                  Secretaria Municipal de Saúde
                              </label>
                          </div>
                          <div class='field'>
                              <label class='checkbox'>
                                  <input type='checkbox' name='orgao-publico[]' value='secretaria-municipal-educacao'>
                                  Secretaria Municipal de Educação
                              </label>
                          </div>
                          <div class='field'>
                              <label class='checkbox'>
                                  <input type='checkbox' name='orgao-publico[]' value='governo-estadual'>
                                  Governo Estadual
                              </label>
                          </div>
                      </div>
                  </div>
              </div>
  
              <div class='column is-6-widescreen is-6-desktop is-6-tablet is-12-mobile'>
                  <label class='label is-size-5' for='estado'>Estado <span class='has-text-danger'>*</span></label>
                  <div class='control'>
                      <div class='select is-fullwidth'>
                          <select name='estado' id='estado' required aria-label='Selecione o estado'>
                              <option value='' selected>Selecione</option>
                          </select>
                      </div>
                  </div>
              </div>
  
              <div class='column is-6-widescreen is-6-desktop is-6-tablet is-12-mobile'>
                  <label class='label is-size-5' for='cidade'>Cidade <span class='has-text-danger'>*</span></label>
                  <div class='control'>
                      <div class='select is-fullwidth'>
                          <select name='cidade' id='cidade' required aria-label='Selecione a cidade'>
                              <option value=''>Selecione</option>
                          </select>
                      </div>
                  </div>
              </div>
  
              <div class='column mt-4 is-12'>
                  <button id='btn-enviar' type='submit' class='column is-12 is-12-mobile is-link button is-size-4 has-text-white'
                          aria-label='Enviar formulário'>
                      Enviar
                  </button>
              </div>
          </form>
      </main>
  </div>
  <script type='text/javascript'>
      var __ss_noform = __ss_noform || [];
      __ss_noform.push(['baseURI', 'https://app-3SI74COZ2S.marketingautomation.services/webforms/receivePostback/MzY0Mje0MDY2AwA/']);
      __ss_noform.push(['endpoint', 'd5a604e9-9d62-4c9b-9181-93cd138cd295']);
  </script>
  <script type='text/javascript' src='https://koi-3SI74COZ2S.marketingautomation.services/client/noform.js?ver=1.24' ></script>
  <script>
  const selectEstado = document.getElementById('estado');
  const selectCidade = document.getElementById('cidade');
  const inputEmail = document.getElementById('email');
  const inputNome = document.getElementById('nome-completo');
  const inputNomeEmpresa = document.getElementById('nome-empresa');
  const inputWhatsapp = document.getElementById('whatsapp');
  const btn = document.getElementById('btn-enviar');
  const containerCheckbox = document.getElementById('container-checkbox');
  const checkboxes = document.querySelectorAll(`input[type='checkbox']`);
  const checked = document.querySelectorAll(`input[type='checkbox']:checked`);
  const formulario = document.getElementById('formulario-cep');
  
  document.addEventListener('DOMContentLoaded', async () => {
      try {
          mascarasEValidacoes();
          eventoEnviarFormulario();
          await main()
      } catch (error) {
          console.error('Houve um erro: ', error);
      }
  });
  
  
  async function main() {
      await adicionarEventoMudancaEstado();
      await criaEstados();
      await criaCidades();
  }
  
  function eventoEnviarFormulario() {
      btn.addEventListener('click', async (e) => {
          e.preventDefault();
          if (!formulario.checkValidity()) {
              formulario.reportValidity();
          }
          if (!verificaCamposObrigatorios()) {
              return;
          }
          const eventoSubmit = new Event('submit', {
              bubbles: true,
              cancelable: true,
          });
          formulario.dispatchEvent(eventoSubmit);
      });
  }
  
  function verificaCamposObrigatorios() {
      const checked = document.querySelectorAll(`input[type='checkbox']:checked`);
      if (checked.length === 0) {
          containerCheckbox.classList.add('is-border-danger');
          return false;
      }
  
      const campos = [
          inputEmail,
          inputNome,
          inputNomeEmpresa,
          inputWhatsapp,
          selectEstado,
          selectCidade,
      ];
      for (const campo of campos) {
          if (campo.value.trim() === '') {
              campo.classList.add('is-danger');
              return false;
          }
      }
  
      return true;
  }
  
  function mascarasEValidacoes() {
      checkboxes.forEach(checkbox => {
          checkbox.addEventListener('change', () => {
              const checked = document.querySelectorAll(`input[type='checkbox']:checked`);
              if (checked.length > 0) {
                  containerCheckbox.classList.remove('is-border-danger');
              }
          });
      });
  
      inputEmail.addEventListener('input', () => {
          if (inputEmail.validity.valid) {
              inputEmail.classList.remove('is-danger');
              inputEmail.classList.add('is-success');
          } else {
              inputEmail.classList.remove('is-success');
              inputEmail.classList.add('is-danger');
          }
      });
  
      const whatsappMask = IMask(inputWhatsapp, {
          mask: '(00) 00000-0000'
      });
      inputWhatsapp.addEventListener('input', () => {
          if (whatsappMask.masked.isComplete) {
              inputWhatsapp.classList.remove('is-danger');
              inputWhatsapp.classList.add('is-success');
          } else {
              inputWhatsapp.classList.remove('is-success');
              inputWhatsapp.classList.add('is-danger');
          }
      });
  
      inputNomeEmpresa.addEventListener('input', () => {
          const value = inputNomeEmpresa.value.trim();
          const wordCount = value.split(/\s+/).filter(Boolean).length;
          if (wordCount >= 1 && value.length <= 100) {
              inputNomeEmpresa.classList.remove('is-danger');
              inputNomeEmpresa.classList.add('is-success');
          } else {
              inputNomeEmpresa.classList.remove('is-success');
              inputNomeEmpresa.classList.add('is-danger');
          }
      });
  
      inputNome.addEventListener('input', () => {
          const value = inputNome.value.trim();
          const wordCount = value.split(/\s+/).filter(Boolean).length;
          if (wordCount >= 2 && value.length <= 100) {
              inputNome.classList.remove('is-danger');
              inputNome.classList.add('is-success');
          } else {
              inputNome.classList.remove('is-success');
              inputNome.classList.add('is-danger');
          }
      });
  }
  
  async function adicionarEventoMudancaEstado() {
      selectEstado.addEventListener('change', async (e) => {
          e.preventDefault();
          await criaCidades();
      });
  }
  
  async function criaEstados() {
      selectEstado.innerHTML = '';
      try {
          const estados = await apiEstados();
          if (estados) {
              estados.forEach(e => {
                  criaOptionParaSelect(selectEstado, e.nome, e.id);
              })
          }
      } catch (error) {
          console.error('Erro ao carregar cidades:', error);
      }
  }
  
  async function criaCidades() {
      selectCidade.innerHTML = '';
      const selectedOption = selectEstado.options[selectEstado.selectedIndex];
      try {
          const cidades = await apiCidadesPorEstado(selectedOption.id);
          if (cidades) {
              cidades.forEach(c => {
                  criaOptionParaSelect(selectCidade, c.nome);
              });
          }
      } catch (error) {
          console.error('Erro ao carregar cidades:', error);
      }
  }
  
  
  function criaOptionParaSelect(select, labelOption, idOption = null) {
      const option = document.createElement('option');
      option.textContent = labelOption;
      option.value = labelOption;
      if (idOption) {
          option.id = idOption;
      }
      select.appendChild(option);
  }
  
  async function apiEstados() {
      try {
          const url = 'https://servicodados.ibge.gov.br/api/v1/localidades/estados?orderBy=nome';
          const response = await axios.get(url);
          const dados = response.data;
          return dados.map((item) => {
              return {
                  id: item.id,
                  nome: item.nome,
              }
          })
      } catch (error) {
          console.error('Erro ao buscar estados:', error);
          return false;
      }
  }
  
  async function apiCidadesPorEstado(estadoId) {
      try {
          const url = `https://servicodados.ibge.gov.br/api/v1/localidades/estados/${estadoId}/municipios`;
          const response = await axios.get(url);
          const dados = response.data;
  
          return dados.map((item) => {
              return {
                  id: item.id,
                  nome: item.nome,
              }
          })
      } catch (error) {
          console.error('Erro ao buscar cidades:', error);
          return false;
      }
  }
  </script>
  </body>
  </html>
  <!-- ">
  
  </iframe> -->